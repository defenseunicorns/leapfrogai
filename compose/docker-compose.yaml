version: '3'

services:
  doug-translate:
    image: ghcr.io/defenseunicorns/leapfrogai/doug-translate:0.0.1
    container_name: doug-translate
    ipc: host
    network_mode: host
    environment:
      LEAPFROGAI_BASE_URL: "http://localhost:8080/openai/v1"
      ORIGIN: "http://localhost:3000"
    volumes:
      - doug-translate-volume:/doug-translate

  ctransformers:
    image: ghcr.io/defenseunicorns/leapfrogai/ctransformers:0.0.1
    container_name: ctransformers
    ports:
      - "50051:50051"
    volumes:
      - ctransformers-volume:/ctransformers

  whisper:
    image: ghcr.io/defenseunicorns/leapfrogai/whisper:0.0.6
    container_name: whisper
    ipc: host
    ulimits:
      memlock: -1
      stack: 67108864
    ports:
      - "8000:8000"
      - "50052:50051"
    volumes:
      - whisper-volume:/whisper

  leapfrogai-go-api:
    image: ghcr.io/defenseunicorns/leapfrogai/api:0.3.2
    container_name: leapfrogai-go-api
    ipc: host
    network_mode: host
    ulimits:
      memlock: -1
      stack: 67108864
    volumes:
      - leapfrogai-go-api-volume:/leapfrogai

volumes:
  doug-translate-volume:
  ctransformers-volume:
  whisper-volume:
  leapfrogai-go-api-volume:
