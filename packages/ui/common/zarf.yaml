# yaml-language-server: $schema=https://raw.githubusercontent.com/defenseunicorns/uds-cli/v0.14.0/zarf.schema.json

kind: ZarfPackageConfig
metadata:
  description: "LeapfrogAI UI common"
  name: leapfrogai-ui-common
  version: "###ZARF_PKG_TMPL_IMAGE_VERSION###"

components:
  - name: leapfrogai-ui
    description: "A UI for LeapfrogAI"
    required: true
    charts:
      - name: leapfrogai-ui
        namespace: leapfrogai
        localPath: ../chart
        # x-release-please-start-version
        version: 0.13.1
        # x-release-please-end
    actions:
      onDeploy:
        after:
          - wait:
              cluster:
                kind: Job
                name: leapfrogai-ui-migrations-###ZARF_PKG_TMPL_IMAGE_VERSION###
                namespace: leapfrogai
                condition: complete
          - wait:
              cluster:
                kind: Deployment
                name: leapfrogai-ui
                namespace: leapfrogai
                condition: Available
