podSecurityContext:
  runAsNonRoot: true
  fsGroup: 65532

api:
  image:
    repository: ghcr.io/defenseunicorns/leapfrogai/leapfrogai-api
    # x-release-please-start-version
    tag: 0.11.0
    # x-release-please-end
    imagePullPolicy: Always
  replicas: 1
  securityContext:
    runAsUser: 65532
    runAsGroup: 65532
    runAsNonRoot: true
    capabilities:
      drop:
      - ALL
  env:
    port: 8080
    exposeAPI: "###ZARF_VAR_EXPOSE_API###"
    defaultEmbeddingsModel: "###ZARF_VAR_DEFAULT_EMBEDDINGS_MODEL###"

  migration:
    image:
      repository: ghcr.io/defenseunicorns/leapfrogai/api-migrations
      # x-release-please-start-version
      tag: 0.11.0
      # x-release-please-end
      imagePullPolicy: Always
    securityContext:
      runAsUser: 65532
      runAsGroup: 65532
      runAsNonRoot: true
      capabilities:
        drop:
        - ALL
    env:
      serviceName: "supabase-postgresql"
      servicePort: 5432

supabase:
  env:
    url: "http://supabase-kong.leapfrogai.svc.cluster.local:80"

kiwigrid:
  image:
    repository: kiwigrid/k8s-sidecar
    tag: 1.23.3
    imagePullPolicy: Always
  securityContext:
    runAsUser: 65532
    runAsGroup: 65532
    runAsNonRoot: true
    capabilities:
      drop:
      - ALL
