podSecurityContext:
  runAsNonRoot: true
  fsGroup: 65532

api:
  image:
    repository: ghcr.io/defenseunicorns/leapfrogai/leapfrogai-api
    # x-release-please-start-version
    tag: 0.12.1
    # x-release-please-end
    imagePullPolicy: Always

  replicas: 1

  securityContext:
    runAsUser: 65532
    runAsGroup: 65532
    runAsNonRoot: true
    capabilities:
      drop:
        - ALL

  port: 8080

  env:
    exposeAPI: "true"
    defaultEmbeddingsModel: "text-embeddings"

  serviceAccount:
    name: leapfrogai-api
    create: true

  migration:
    image:
      repository: ghcr.io/defenseunicorns/leapfrogai/api-migrations
      # x-release-please-start-version
      tag: 0.12.1
      # x-release-please-end
      imagePullPolicy: Always
    securityContext:
      runAsUser: 65532
      runAsGroup: 65532
      runAsNonRoot: true
      capabilities:
        drop:
          - ALL

    env:
      serviceName: "supabase-postgresql"
      servicePort: 5432

supabase:
  env:
    url: "http://supabase-kong.leapfrogai.svc.cluster.local:80"

kiwigrid:
  image:
    repository: kiwigrid/k8s-sidecar
    tag: 1.23.3
    imagePullPolicy: Always

  securityContext:
    runAsUser: 65532
    runAsGroup: 65532
    runAsNonRoot: true
    capabilities:
      drop:
        - ALL
