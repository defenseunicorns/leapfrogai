name: setup-uds
description: "Setup UDS Cluster"

inputs:
  registry1Username:
    description: Registry1 Username
  registry1Password:
    description: Registry1 Password

runs:
  using: composite
  steps:
    - name: Setup UDS Environment
      uses: defenseunicorns/uds-common/.github/actions/setup@822dac4452e6815aadcf09f487406ff258756a0c # v0.14.0
      with:
        registry1Username: ${{ secrets.IRON_BANK_ROBOT_USERNAME }}
        registry1Password: ${{ secrets.IRON_BANK_ROBOT_PASSWORD }}
        udsCliVersion: 0.14.0
        ghToken: ${{ secrets.GITHUB_TOKEN }}

    - name: Create UDS Cluster
      shell: bash
      run: |
        make create-uds-cpu-cluster
