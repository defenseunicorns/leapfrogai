name: setup-uds
description: "Setup UDS Cluster"

inputs:
  registry1Username:
    description: Registry1 Username
  registry1Password:
    description: Registry1 Password

runs:
  using: composite
  steps:
    - name: Setup UDS Environment
      uses: defenseunicorns/uds-common/.github/actions/setup@05f42bb3117b66ebef8c72ae050b34bce19385f5
      with:
        username: ${{ inputs.registry1Username }}
        password: ${{ inputs.registry1Password }}

    - name: Checkout Repo
      uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1

    - name: Create UDS Cluster
      shell: bash
      run: |
        UDS_CONFIG=.github/config/uds-config.yaml uds deploy k3d-core-slim-dev:0.25.2 --confirm